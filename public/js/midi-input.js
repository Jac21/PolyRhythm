function onMIDISuccess(e){b_HasMidi=!0,midi=e;for(var t=midi.inputs.values(),n=t.next();n&&!n.done;n=t.next())n.value.onmidimessage=onMIDIMessage,listInputs(n);midi.onstatechange=onStateChange}function onMIDIFailure(e){console.log("Shit's broke - midi - ",e)}function onMIDIMessage(e){switch(data=e.data,cmd=data[0]>>4,channel=15&data[0],type=240&data[0],note=data[1],velocity=data[2],type){case 144:noteOn(note,velocity);break;case 128:}}function listInputs(e){var t=e.value;console.log("Input port : [ type:'"+t.type+"' id: '"+t.id+"' manufacturer: '"+t.manufacturer+"' name: '"+t.name+"' version: '"+t.version+"']")}function noteOn(e,t){var n=0;switch(e){case 36:n=68;break;case 38:n=69;break;case 40:n=82;break;case 41:n=84;break;case 43:n=65;break;case 45:n=83;break;case 47:n=87;break;case 48:n=70}console.log("MIDI Note",e),socket.emit("animation_output",n),animationController.trigger(n)}function logger(e){console.log(" [channel: "+(15&e[0])+", cmd: "+(e[0]>>4)+", type: "+(240&e[0])+" , note: "+e[1]+" , velocity: "+e[2]+"]")}function onStateChange(e){var t=e.port,n=t.state,a=t.name,o=t.type;"input"==o&&console.log("name",a,"port",t,"state",n)}var AudioContext=AudioContext||webkitAudioContext,context=new AudioContext,data,cmd,channel,type,note,velocity,b_HasMidi=!1;navigator.requestMIDIAccess?navigator.requestMIDIAccess({sysex:!1}).then(onMIDISuccess,onMIDIFailure):console("No MIDI support in your browser.");