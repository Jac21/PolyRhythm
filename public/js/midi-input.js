function onMIDISuccess(e){midiDeviceConnected=!0,midi=e;for(var t=midi.inputs.values(),a=t.next();a&&!a.done;a=t.next())a.value.onmidimessage=onMIDIMessage,listInputs(a);midi.onstatechange=onStateChange}function onMIDIFailure(e){console.log("Shit's broke - midi - ",e)}function onMIDIMessage(e){switch(data=e.data,cmd=data[0]>>4,channel=15&data[0],type=240&data[0],note=data[1],velocity=data[2],type){case 144:noteOn(note,velocity);break;case 128:}}function listInputs(e){var t=e.value;console.log("Input port : [ type:'"+t.type+"' id: '"+t.id+"' manufacturer: '"+t.manufacturer+"' name: '"+t.name+"' version: '"+t.version+"']")}function noteOn(e,t){var a=[];switch(e){case 48:a.push("veil");break;case 49:a.push("ufo");break;case 50:a.push("suspension");break;case 51:a.push("highRise");break;case 52:a.push("starExplode");break;case 53:a.push("clay");break;case 54:a.push("circlePop");break;case 55:a.push("horizontalLines");break;case 56:a.push("strike");break;case 57:a.push("squiggle");break;case 58:a.push("flash");break;case 61:a.push("dotted_spiral");break;case 62:a.push("centerCircle")}animationController.trigger(a),socket.emit("animation_output",{animation:a})}function logger(e){console.log(" [channel: "+(15&e[0])+", cmd: "+(e[0]>>4)+", type: "+(240&e[0])+" , note: "+e[1]+" , velocity: "+e[2]+"]")}function onStateChange(e){var t=e.port,a=t.state,n=t.name,o=t.type;"input"==o&&console.log("name",n,"port",t,"state",a)}var AudioContext=AudioContext||webkitAudioContext,context=new AudioContext,data,cmd,channel,type,note,velocity,midiDeviceConnected=!1;navigator.requestMIDIAccess?navigator.requestMIDIAccess({sysex:!1}).then(onMIDISuccess,onMIDIFailure):console("No MIDI support in your browser.");