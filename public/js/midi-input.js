function onMIDISuccess(e){midiDeviceConnected=!0,midi=e;for(var t=midi.inputs.values(),n=t.next();n&&!n.done;n=t.next())n.value.onmidimessage=onMIDIMessage,listInputs(n);midi.onstatechange=onStateChange}function onMIDIFailure(e){console.log("Shit's broke - midi - ",e)}function onMIDIMessage(e){switch(data=e.data,cmd=data[0]>>4,channel=15&data[0],type=240&data[0],note=data[1],velocity=data[2],type){case 144:noteOn(note,velocity);break;case 128:}}function listInputs(e){var t=e.value;console.log("Input port : [ type:'"+t.type+"' id: '"+t.id+"' manufacturer: '"+t.manufacturer+"' name: '"+t.name+"' version: '"+t.version+"']")}function noteOn(e,t){var n=[];animationController.trigger(n),socket.emit("animation_output",{animation:n})}function logger(e){console.log(" [channel: "+(15&e[0])+", cmd: "+(e[0]>>4)+", type: "+(240&e[0])+" , note: "+e[1]+" , velocity: "+e[2]+"]")}function onStateChange(e){var t=e.port,n=t.state,o=t.name,a=t.type;"input"==a&&console.log("name",o,"port",t,"state",n)}var AudioContext=AudioContext||webkitAudioContext,context=new AudioContext,data,cmd,channel,type,note,velocity,midiDeviceConnected=!1;navigator.requestMIDIAccess?navigator.requestMIDIAccess({sysex:!1}).then(onMIDISuccess,onMIDIFailure):console("No MIDI support in your browser.");