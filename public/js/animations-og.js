function map(t,n,e,i,o){return i+(o-i)*((t-n)/(e-n))}function convertHex(t,n){return t=t.replace("#",""),r=parseInt(t.substring(0,2),16),g=parseInt(t.substring(2,4),16),b=parseInt(t.substring(4,6),16),result="rgba("+r+","+g+","+b+","+n/100+")",result}var type=/(canvas|webgl)/.test(url.type)?url.type:"svg",two=new Two({type:Two.Types[type],fullscreen:!0}).appendTo(document.querySelector("#two")),Easing=TWEEN.Easing,width=$(window).width(),height=$(window).height(),center={x:width/2,y:height/2},min_dimension=width>height?height:width,TWO_PI=2*Math.PI,duration=1e3,shortDuration=.3*duration,mediumDuration=.75*duration,rand=function(t,n){return Math.floor(Math.random()*(n-t))+t},colors={morning:["#FFE481","#FB8C8E","#C695FA"],afternoon:["#A6F4FE","#E9547D","#DFD4B8"],night:["#DE1157","#F2A600","#1F285E"]},currentPallette=colors.afternoon;document.querySelector("body").style.backgroundImage="linear-gradient(45deg, "+currentPallette[0]+", "+currentPallette[1]+", "+currentPallette[2]+")";var midCornerPositions=[{x:width-width/3,y:height/3/2},{x:width-width/3,y:height-height/3/2},{x:width/3,y:height/3/2},{x:width/3,y:height-height/3/2},{x:width-width/3/2,y:height/3},{x:width-width/3/2,y:height-height/3},{x:width/3/2,y:height/3},{x:width/3/2,y:height-height/3}],backGround=two.makeGroup(),highRise=function(){function t(){var t={x:width/(rand(0,e)+1),y:height+height/2};o.translation.set(t.x,t.y),o.visible=!1,o.fill=currentPallette[0],i=!1,a.stop(),l.stop()}var n=_.identity,e=5,i=!1,o=two.makeRectangle(0,0,width/e*1.5,height);o.fill=currentPallette[0],o.noStroke(),o.visible=!0;var r=function(t,e){i=!0,o.visible=!0,a.start(),_.isFunction(t)&&(n=t)};r.onComplete=t;var a=new TWEEN.Tween(o.translation).to({y:center.y},shortDuration).easing(Easing.Cubic.Out).onComplete(function(){l.start()});console.log(Easing);var l=new TWEEN.Tween(o.translation).to({y:height+height/2},shortDuration).easing(Easing.Cubic.Out).onComplete(function(){r.onComplete(),n()});t();var s={start:r,clear:t,playing:function(){return i}};return s}(),sqaureExplode=function(){function t(){i.rotation=Math.PI*Math.random()*10,i.visible=!0,e=!1,a.stop(),l.stop()}var n=_.identity,e=!1,i=two.makeStar(center.x,center.y,200,400,5),o=randomColor({luminosity:"light"});i.fill=convertHex(o,100),i.stroke=convertHex(o,100),i.linewidth=10,i.visible=!0,i.scale=0;var r=function(t,o){var r=randomColor({luminosity:"light"});i.fill=convertHex(r,100),i.stroke=convertHex(r,100),e=!0,i.visible=!0,a.start(),_.isFunction(t)&&(n=t)};r.onComplete=t;var a=new TWEEN.Tween(i).to({scale:1},.2*duration).easing(Easing.Exponential.Out).onComplete(function(){l.start()}),l=new TWEEN.Tween(i).to({scale:0},.2*duration).easing(Easing.Exponential.In).onComplete(function(){r.onComplete(),n()});t();var s={start:r,clear:t,playing:function(){return e}};return s}(),middleGround=two.makeGroup(),foreGround=two.makeGroup(),circlePop=function(){function t(){var t=midCornerPositions[rand(0,midCornerPositions.length)];i.translation.set(t.x,t.y),i.visible=!1,i.fill=currentPallette[rand(0,currentPallette.length)],e=!1,r.stop(),a.stop()}var n=_.identity,e=!1,i=two.makeCircle(center.x,center.y,200,200);i.fill="#FFF",i.noStroke(),i.visible=!0;var o=function(t,o){e=!0,i.visible=!0,r.start(),_.isFunction(t)&&(n=t)};o.onComplete=t;var r=new TWEEN.Tween(i).to({scale:1},shortDuration).easing(Easing.Exponential.Out).onComplete(function(){a.start()}),a=new TWEEN.Tween(i).to({scale:0},shortDuration).easing(Easing.Exponential.Out).onComplete(function(){o.onComplete(),n()});t();var l={start:o,clear:t,playing:function(){return e}};return l}(),circlePop=function(){function t(){var t=midCornerPositions[rand(0,midCornerPositions.length)];i.translation.set(t.x,t.y),i.visible=!1,i.fill=currentPallette[rand(0,currentPallette.length)],e=!1,r.stop(),a.stop()}var n=_.identity,e=!1,i=two.makeCircle(center.x,center.y,200,200);i.fill="#FFF",i.noStroke(),i.visible=!0;var o=function(t,o){e=!0,i.visible=!0,r.start(),_.isFunction(t)&&(n=t)};o.onComplete=t;var r=new TWEEN.Tween(i).to({scale:1},shortDuration).easing(Easing.Exponential.Out).onComplete(function(){a.start()}),a=new TWEEN.Tween(i).to({scale:0},shortDuration).easing(Easing.Exponential.Out).onComplete(function(){o.onComplete(),n()});t();var l={start:o,clear:t,playing:function(){return e}};return l}(),strike=function(){function t(){for(n=!1,s=Math.random(),a.linewidth=Math.round(7*s)+3,o=Math.round(map(s,0,1,.5*height,width)),u=Math.random()*TWO_PI,y.x=o*Math.cos(u),y.y=o*Math.sin(u),u+=Math.PI,E.x=o*Math.cos(u),E.y=o*Math.sin(u),a.ending=a.beginning=0,a.visible=!1,h=0;i>h;h++)g=r[h],c=h/(i-1),g.x=lerp(y.x,E.x,c),g.y=lerp(y.y,E.y,c);w.stop(),m.stop()}var n=!1,e=_.identity,i=32,o=.5*min_dimension,r=_.map(_.range(i),function(t){return new Two.Anchor}),a=two.makePolygon(r,!0);a.noFill().stroke=currentPallette[2],a.translation.set(center.x,center.y),a.cap="round";var l=function(t,i){a.visible=!0,n=!0,w.start(),!i&&f.sound&&f.sound.stop().play(),_.isFunction(t)&&(e=t)};l.onComplete=t;var s,u,c,h,g,d=function(){a.translation.set(center.x,center.y)},p=function(){a.stroke=currentPallette[2]},w=new TWEEN.Tween(a).to({ending:1},.25*duration).easing(Easing.Circular.In).onComplete(function(){console.log("End of in"),m.start()}),m=new TWEEN.Tween(a).to({beginning:1},.25*duration).easing(Easing.Circular.Out).onComplete(function(){console.log("End of out"),l.onComplete(),e()}),f={start:l,update:p,clear:t,resize:d,playing:function(){return n},hash:"1,5",filename:"strike"},y={x:0,y:0},E={x:0,y:0};return t(),f}();