var type=/(canvas|webgl)/.test(url.type)?url.type:"svg",two=new Two({type:Two.Types[type],fullscreen:!0}).appendTo(document.querySelector("#two")),Easing=TWEEN.Easing,width=$(window).width(),height=$(window).height(),center={x:width/2,y:height/2},min_dimension=width>height?height:width,TWO_PI=2*Math.PI,duration=1e3,shortDuration=.3*duration,mediumDuration=.75*duration,rand=function(t,e){return Math.floor(Math.random()*(e-t))+t},colors={morning:["#FFE481","#FB8C8E","#C695FA"],afternoon:["#A6F4FE","#E9547D","#DFD4B8"],night:["#DE1157","#F2A600","#1F285E"]},currentPallette=colors.afternoon;document.querySelector("body").style.backgroundImage="linear-gradient(45deg, "+currentPallette[0]+", "+currentPallette[1]+", "+currentPallette[2]+")";var midCornerPositions=[{x:width-width/3,y:height/3/2},{x:width-width/3,y:height-height/3/2},{x:width/3,y:height/3/2},{x:width/3,y:height-height/3/2},{x:width-width/3/2,y:height/3},{x:width-width/3/2,y:height-height/3},{x:width/3/2,y:height/3},{x:width/3/2,y:height-height/3}],highRise=function(){function t(){var t={x:width/(rand(0,n)+1),y:height+height/2};o.translation.set(t.x,t.y),o.visible=!1,o.fill=currentPallette[0],i=!1,a.stop(),l.stop()}var e=_.identity,n=5,i=!1,o=two.makeRectangle(0,0,width/n*1.5,height);o.fill=currentPallette[0],o.noStroke(),o.visible=!0;var r=function(t,n){i=!0,o.visible=!0,a.start(),_.isFunction(t)&&(e=t)};r.onComplete=t;var a=new TWEEN.Tween(o.translation).to({y:center.y},shortDuration).easing(Easing.Cubic.Out).onComplete(function(){l.start()});console.log(Easing);var l=new TWEEN.Tween(o.translation).to({y:height+height/2},shortDuration).easing(Easing.Cubic.Out).onComplete(function(){r.onComplete(),e()});t();var s={start:r,clear:t,playing:function(){return i}};return s}(),centerCircle=function(){function t(){i.visible=!0,n=!1,r.stop(),a.stop()}var e=_.identity,n=!1,i=two.makeCircle(center.x,center.y,200,200);i.fill="#FFF",i.noStroke(),i.visible=!0;var o=function(t,o){n=!0,i.visible=!0,r.start(),_.isFunction(t)&&(e=t)};o.onComplete=t;var r=new TWEEN.Tween(i).to({scale:1.5},.2*duration).easing(Easing.Exponential.In).onComplete(function(){a.start()}),a=new TWEEN.Tween(i).to({scale:1},.15*duration).easing(Easing.Exponential.Out).onComplete(function(){o.onComplete(),e()});t();var l={start:o,clear:t,playing:function(){return n}};return l}(),circlePop=function(){function t(){var t=midCornerPositions[rand(0,midCornerPositions.length)];i.translation.set(t.x,t.y),i.visible=!1,i.fill=currentPallette[rand(0,currentPallette.length)],n=!1,r.stop(),a.stop()}var e=_.identity,n=!1,i=two.makeCircle(center.x,center.y,200,200);i.fill="#FFF",i.noStroke(),i.visible=!0;var o=function(t,o){n=!0,i.visible=!0,r.start(),_.isFunction(t)&&(e=t)};o.onComplete=t;var r=new TWEEN.Tween(i).to({scale:1},shortDuration).easing(Easing.Exponential.Out).onComplete(function(){a.start()}),a=new TWEEN.Tween(i).to({scale:0},shortDuration).easing(Easing.Exponential.Out).onComplete(function(){o.onComplete(),e()});t();var l={start:o,clear:t,playing:function(){return n}};return l}(),glimmer=function(){function t(){for(c=0;o>c;c++)u=s[c],g=TWO_PI*Math.random(),w=Math.random()*center.y*Math.cos(g),p=Math.random()*center.y*Math.sin(g),u.translation.set(w,p),u.visible=!1,u.scale=0,u.linewidth=u.__linewidth,u.tween.stop();n=!1}var e,n=!1,i=_.identity,o=12,r=20*height/900,a=40*height/900,l=0,s=_.map(_.range(o),function(t){var n=Math.round(map(Math.random(),0,1,r,a)),i=Math.random()*duration*.5,o=two.makeCircle(0,0,n);return o.key=colors.getRandomKey(),o.stroke=colors[o.key],o.noFill(),o.__linewidth=20*Math.random()+40,o.tween=new TWEEN.Tween(o).to({scale:1,linewidth:0},.2*duration).easing(Easing.Sinusoidal.Out).delay(i).onComplete(function(){o.visible=!1}),i>l&&(l=i,e=t),o});s[e].tween.onComplete(function(){s[e].visible=!1,d.onComplete(),i()});var h=two.makeGroup(s);h.translation.set(center.x,center.y);var c,u,d=function(t,e){for(n=!0,c=0;o>c;c++)u=s[c],u.visible=!0,u.tween.start();!e&&f.sound&&f.sound.stop().play(),_.isFunction(t)&&(i=t)};d.onComplete=t;var g,w,p,y=function(){for(c=0;o>c;c++)s[c].stroke=colors[s[c].key]},m=function(){h.translation.set(center.x,center.y)};t();var f={start:d,update:y,clear:t,resize:m,playing:function(){return n}};return f}();